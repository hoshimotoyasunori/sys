# 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
システム設計アシスタント

### 1.2 プロジェクトの目的
システム設計プロジェクトの管理と進捗追跡を支援するWebアプリケーションの開発

### 1.3 プロジェクトの背景
- システム設計プロジェクトの進捗管理が複雑
- チーム間での情報共有が不十分
- 設計フェーズの標準化が必要

## 2. システム概要

### 2.1 システム名
システム設計アシスタント

### 2.2 システムの目的
- システム設計プロジェクトの効率的な管理
- チームメンバー間の協働支援
- 設計フェーズの標準化と進捗可視化

### 2.3 システムの特徴
- Webベース + デスクトップアプリのハイブリッドシステム
- リアルタイム協働システム
- プロジェクトベースの管理
- 招待システムによるチーム構築
- 4フェーズの設計プロセス管理

## 3. 機能要件

### 3.1 認証・認可機能
#### 3.1.1 ユーザー認証
- **機能**: ユーザーのログイン・ログアウト
- **詳細**: 
  - メールアドレスとパスワードによる認証
  - セッション管理
  - 認証状態の永続化

#### 3.1.2 権限管理
- **機能**: プロジェクト内での権限管理
- **詳細**:
  - オーナー: プロジェクトの完全管理権限
  - 管理者: プロジェクトの編集権限
  - メンバー: プロジェクトの閲覧・編集権限

### 3.2 プロジェクト管理機能
#### 3.2.1 プロジェクト作成
- **機能**: 新しいプロジェクトの作成
- **詳細**:
  - プロジェクト名の設定
  - プロジェクト説明の設定
  - 初期フェーズ・タスク・成果物の自動作成

#### 3.2.2 プロジェクト編集
- **機能**: プロジェクト情報の編集
- **詳細**:
  - プロジェクト名の変更
  - プロジェクト説明の変更
  - オーナーのみ編集可能

#### 3.2.3 プロジェクト削除
- **機能**: プロジェクトの削除
- **詳細**:
  - オーナーのみ削除可能
  - 関連データの完全削除（メンバー、招待、タスク、成果物、フェーズ）

#### 3.2.4 プロジェクト切り替え
- **機能**: 複数プロジェクト間の切り替え
- **詳細**:
  - プロジェクト一覧の表示
  - プロジェクト選択による切り替え
  - 現在のプロジェクトの表示

### 3.3 メンバー管理機能
#### 3.3.1 メンバー招待
- **機能**: プロジェクトへのメンバー招待
- **詳細**:
  - メールアドレスによる招待
  - 招待メールの送信
  - 招待状態の管理

#### 3.3.2 招待受け入れ
- **機能**: 招待の受け入れ
- **詳細**:
  - 招待リンクからのアクセス
  - 招待の確認と受け入れ
  - プロジェクトメンバーとしての参加

#### 3.3.3 メンバー管理
- **機能**: プロジェクトメンバーの管理
- **詳細**:
  - メンバー一覧の表示
  - メンバーの権限変更
  - メンバーの削除

### 3.4 タスク管理機能
#### 3.4.1 タスク表示
- **機能**: フェーズ別タスクの表示
- **詳細**:
  - 4フェーズ（要件定義、基本設計、外部設計、開発準備）のタスク表示
  - チェックボックスによる進捗管理
  - タスクの順序固定（order_index）

#### 3.4.2 タスク更新
- **機能**: タスクの進捗更新
- **詳細**:
  - チェックボックスのオン/オフ
  - リアルタイム同期
  - 順序の維持

### 3.5 成果物管理機能
#### 3.5.1 成果物表示
- **機能**: フェーズ別成果物の表示
- **詳細**:
  - 4フェーズの成果物表示
  - ステータス管理（未着手、進行中、完了）
  - 成果物の順序固定

#### 3.5.2 成果物更新
- **機能**: 成果物のステータス更新
- **詳細**:
  - ステータスの変更
  - リアルタイム同期
  - 順序の維持

### 3.6 フェーズ管理機能
#### 3.6.1 フェーズ表示
- **機能**: 設計フェーズの表示
- **詳細**:
  - 4つの設計フェーズの表示
  - フェーズ別の進捗表示
  - フェーズ概要の表示

### 3.7 リアルタイム同期機能
#### 3.7.1 データ同期
- **機能**: リアルタイムデータ同期
- **詳細**:
  - プロジェクトデータのリアルタイム更新
  - メンバー間での即座な反映
  - 競合状態の回避

## 4. 非機能要件

### 4.1 性能要件
- **レスポンス時間**: ページ読み込み3秒以内
- **同時接続数**: 100ユーザー以上
- **データ更新**: リアルタイム（1秒以内）

### 4.2 可用性要件
- **稼働率**: 99.5%以上
- **保守時間**: 月1回、深夜2時間以内

### 4.3 セキュリティ要件
- **認証**: セキュアな認証システム
- **認可**: ロールベースアクセス制御
- **データ保護**: 暗号化通信（HTTPS）
- **SQLインジェクション対策**: パラメータ化クエリ

### 4.4 保守性要件
- **コード品質**: TypeScriptによる型安全性
- **ドキュメント**: 適切なコメントとドキュメント
- **テスト**: 主要機能のテストカバレッジ

### 4.5 拡張性要件
- **スケーラビリティ**: 水平スケーリング対応
- **モジュール性**: コンポーネントベース設計
- **API設計**: RESTful API設計

## 5. 制約事項

### 5.1 技術制約
- **フロントエンド**: React 19 + TypeScript
- **デスクトップアプリ**: Electron
- **バックエンド**: Supabase（PostgreSQL）
- **認証**: Supabase Auth
- **ホスティング**: Vercel対応

### 5.2 予算制約
- **開発期間**: 3ヶ月以内
- **運用コスト**: 月額$50以内

### 5.3 法的制約
- **個人情報保護**: GDPR準拠
- **データ保持**: 適切なデータ保持期間の設定

## 6. 外部システム連携

### 6.1 メールシステム
- **機能**: 招待メールの送信
- **技術**: Supabase Edge Functions
- **形式**: HTMLメール

### 6.2 データベース
- **機能**: データの永続化
- **技術**: PostgreSQL（Supabase）
- **バックアップ**: 自動バックアップ

## 7. 運用要件

### 7.1 監視要件
- **ログ監視**: エラーログの監視
- **性能監視**: レスポンス時間の監視
- **可用性監視**: サービス稼働状況の監視

### 7.2 バックアップ要件
- **データバックアップ**: 日次バックアップ
- **設定バックアップ**: 設定ファイルのバックアップ
- **復旧時間**: 4時間以内

## 8. 移行要件

### 8.1 データ移行
- **移行対象**: プロジェクトデータ、ユーザーデータ
- **移行方法**: データエクスポート/インポート
- **移行時間**: 24時間以内

### 8.2 ユーザー移行
- **移行対象**: ユーザーアカウント
- **移行方法**: アカウント情報の移行
- **移行時間**: 48時間以内 